<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="I have an Angular 2 Frontend to be tested, I found on a Site ( https://kendaleiv.com/angular-2-component-testing-template-using-testbed/ ) a guy using ng-test (angular core testing) TestBed, this is a really basic example it does not explain how to do operations with the Elements."><meta name=author content="Martina Birk"><meta name=generator content="Hugo 0.98.0"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=robots content="index,follow,noarchive"><link rel=stylesheet href=https://assets.cdnweb.info/hugo/base16/css/style.css type=text/css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" type=text/css><link rel=alternate href=./index.xml type=application/rss+xml title=WinkBlog><title>Angular 2 App Testing, how to access and operate on html elements? - WinkBlog</title></head><body><header><div class="container clearfix"><a class=path href=./index.html>[WinkBlog]</a>
<span class=caret># _</span><div class=right></div></div></header><div class=container><main role=main class=article><article class=single itemscope itemtype=http://schema.org/BlogPosting><div class=meta><span class=key>published on</span>
<span class=val><time itemprop=datePublished datetime=2024-07-28>July 28, 2024</time></span>
<span class=key>in</span>
<span class=val><a href=./categories/blog>blog</a></span></div><h1 class=headline itemprop=headline>Angular 2 App Testing, how to access and operate on html elements?</h1><section class=body itemprop=articleBody><img src=https://cdn.statically.io/img/cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><p>I have an Angular 2 Frontend to be tested, I found on a Site ( <a href=# rel="nofollow noreferrer">https://kendaleiv.com/angular-2-component-testing-template-using-testbed/</a> ) a guy using ng-test (angular core testing) TestBed, this is a really basic example it does not explain how to do operations with the Elements.</p><p>My App has an Input Form element, once the input signal has been sent through the Form Element it show a results set on an InfoBox element. So what I would like to do is to retrieve the element Form from the TestBed provide a String to search with it and get the response from the Input box. (Test 3)</p><p>1) How do I retrieve the elements (form and InfoBox)?</p><p>2) How do I get the signal to be processed from the InfoBox?</p><p>3) How can I retrieve the result set from the InfoBox Element once the signal has been processed?</p><p>Here is the code sample that I’m using, when I run it with the command ‘ng test’ it starts Chrome and the first two tests are working.</p><pre><code>describe('AppComponent', () =&gt; { beforeEach(async(() =&gt; { TestBed.configureTestingModule({ declarations: [ AgsResultsComponent, AppComponent, FormularComponent, FormularAutocompleteComponent, InfoBoxComponent, InfoBoxAgencyDetailsComponent, InfoBoxAgencyItemComponent ], providers: [ConfigurationService], schemas: [NO_ERRORS_SCHEMA] }).compileComponents(); })); // Test 1 it('should create the app', async(() =&gt; { const fixture = TestBed.createComponent(AppComponent); const app = fixture.debugElement.componentInstance; console.log(app); expect(app).toBeTruthy(); })); // Test 2 it('should render agsheading in a h1 tag', async(() =&gt; { const fixture = TestBed.createComponent(AppComponent); fixture.detectChanges(); const compiled = fixture.debugElement.nativeElement; expect(compiled.querySelector('h1').textContent).toContain('Agentursuche'); })); // Test 3 it('should execute a search using Form', async(() =&gt; { const formular = TestBed.createComponent(FormularComponent); const infoBox = TestBed.createComponent(InfoBoxComponent); formular.detectChanges(); infoBox.detectChanges(); const formularCompiled = formular.debugElement.nativeElement; const infoBoxCompiled = infoBox.debugElement.nativeElement; formularCompiled.sendInput('Just a Test'); expect(infoBoxCompiled).toContain(something); })); }); </code></pre><span class=d-none itemprop=commentCount></span><h2 class=mb0 data-answercount=1>1 Answer</h2><p>You should use another beforeEach method to create the components and store them in a local variable, so you avoid writing the same thing in each test.</p><p>In order to fetch html elements from the component one can use the query method on the debug element:</p><pre><code>const inputDebugElement = formular.debugElement.query(By.css('input')); const inputHtmlElement = inputDebugElement.nativeElement as HTMLInputElement; </code></pre><p>Once you have that, you can set values on it and dispatch events:</p><pre><code>inputHtmlElement.value = 'foo'; inputHtmlElement.dispatchEvent(new Event('input')); </code></pre><p>Remember that in order to trigger the change detection you need to call detectChanges() on the fixture and after that wait for it to be stable with whenStable() call or call tick() inside a fakeAsync test.</p><p>Would recommend to read the <a href=# rel="nofollow noreferrer">official testing guidelines</a> to get a better insight on how to test Angular applications.</p><span class=d-none itemprop=commentCount>3</span><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmirpJawrLvVnqmfpJ%2Bse6S7zGiorp2jqbawutJoa25wYGeAeYOOmqWgrZyWv25%2BjJqnqWWkmsC1tc2gZKGnp2LBsHnAnJqeq6Nirq%2BwjKinnqqRqbJuu81mn62lnGKyrbHMnqWtqw%3D%3D</p></section></article></main></div><footer><div class=container><span class=copyright>&copy; 2024 WinkBlog - <a rel=license href=http://creativecommons.org/licenses/by/4.0/>CC BY 4.0</a></span></div></footer><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/banner.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>