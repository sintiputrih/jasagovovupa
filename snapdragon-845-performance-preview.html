<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="As we mentioned earlier, the Snapdragon 845 is the first SoC employing ARMs new cluster technology DynamiQ. The different CPU cores are no longer hosted in dedicated cluster subsystems but are now integrated in a larger DynamiQ cluster. This change means that the cluster cache which to date was referred to as the L2 cache"><meta name=author content="Martina Birk"><meta name=generator content="Hugo 0.98.0"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=robots content="index,follow,noarchive"><link rel=stylesheet href=https://assets.cdnweb.info/hugo/base16/css/style.css type=text/css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" type=text/css><link rel=alternate href=./index.xml type=application/rss+xml title=WinkBlog><title>CPU &amp;amp; Memory Subsystem - The Snapdragon 845 Performance Preview: Setting the Stage for Flagship Andr - WinkBlog</title></head><body><header><div class="container clearfix"><a class=path href=./index.html>[WinkBlog]</a>
<span class=caret># _</span><div class=right></div></div></header><div class=container><main role=main class=article><article class=single itemscope itemtype=http://schema.org/BlogPosting><div class=meta><span class=key>published on</span>
<span class=val><time itemprop=datePublished datetime=2024-07-31>July 31, 2024</time></span>
<span class=key>in</span>
<span class=val><a href=./categories/blog>blog</a></span></div><h1 class=headline itemprop=headline>CPU &amp;amp; Memory Subsystem - The Snapdragon 845 Performance Preview: Setting the Stage for Flagship Andr</h1><section class=body itemprop=articleBody><h2>CPU & Memory Subsystem</h2><p>As we mentioned earlier, the Snapdragon 845 is the first SoC employing ARM’s new cluster technology DynamiQ. The different CPU cores are no longer hosted in dedicated cluster subsystems but are now integrated in a larger DynamiQ cluster. This change means that the cluster cache which to date was referred to as the L2 cache becomes the L3 cache and the individual CPU cores now receive a new private per-core L2. In the case of the Snapdragon 845, the Kryo 385 performance cores&nbsp;– derivative of ARM’s new A75&nbsp;– are configured with 256KB L2 caches. The Kryo 845 efficiency cores, which are derivative of the A55, use 128KB L2 cache configurations.</p><p align=center><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/12420/cpu_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>The L3 cache of the DynamiQ Shared Unit (DSU) is configured at 2MB. At the launch of the Snapdragon 845 Qualcomm advertised three voltage and clock domains – unfortunately we haven’t had time to look deeper into the system of the QRD to find out how this is partitioned, however it is still my unconfirmed belief that the third clock/voltage domain is dedicated to the DSU and not part of the CPU cores. An important characteristic that is totally new to the Android SoC ecosystem is the introduction of a system cache – this 3MB cache seems to sit at the memory controller / interconnect level above the CPU subsystem, something we’ll get back to in just a bit.</p><p>Qualcomm’s performance projections seemed relatively conservative as they claimed a performance uplift of only 25-30% which seemed lower than ARM’s projections. We have to keep in mind that beyond the microarchitectural improvements expected from the transition from A73 to A75 based CPU cores we also have a flat 14% frequency increase from 2.47GHz to 2.8GHz on the side of the performance cores. Unfortunately in the limited testing time we had with the QRD we couldn’t make use of long-running CPU benchmarks such as our SPEC suite, so for the scope of this article we had to base our synthetic analysis on GeekBench4 results.</p><table align=center border=0 cellpadding=0 cellspacing=1 width=650><tbody readability=1><tr class=tgrey readability=2><td align=center colspan=4>Geekbench 4 - Integer Performance<br>Single Threaded</td></tr><tr class=tlblue><td width=19%>&nbsp;</td><td align=center valign=middle width=27%>Snapdragon 845</td><td align=center valign=middle width=27%>Snapdragon 835</td><td align=center valign=middle width=27%>% Increase<br>&nbsp;</td></tr><tr><td><span><b>AES</b></span></td><td align=center>1160 MB/s</td><td align=center>942.5 MB/s</td><td align=center><strong>23.1%</strong></td></tr><tr><td><span><b>LZMA</b></span></td><td align=center>4.15 MB/s</td><td align=center>2.98 MB/s</td><td align=center><strong>39.3%</strong></td></tr><tr><td><span><b>JPEG</b></span></td><td align=center>20.8 Mpixels/s</td><td align=center>16.6 Mpixels/s</td><td align=center><strong>25.2%</strong></td></tr><tr><td><span><b>Canny</b></span></td><td align=center>32.1 Mpixels/s</td><td align=center>24.9 Mpixels/s</td><td align=center><strong>28.8%</strong></td></tr><tr><td><span><b>Lua</b></span></td><td align=center>2.18 MB/s</td><td align=center>1.75 MB/s</td><td align=center><strong>24.0%</strong></td></tr><tr><td><span><b>Dijkstra</b></span></td><td align=center>1.90 MTE/s</td><td align=center>1.62 MTE/s</td><td align=center><strong>16.9%</strong></td></tr><tr><td><span><b>SQLite</b></span></td><td align=center>70.3 Krows/s</td><td align=center>53.4 Krows/s</td><td align=center><strong>31.8%</strong></td></tr><tr><td><span><b>HTML5 Parse</b></span></td><td align=center>12.9 MB/s</td><td align=center>8.97 MB/s</td><td align=center><strong>44.1%</strong></td></tr><tr><td><span><b>HTML5 DOM</b></span></td><td align=center>3.00 Melems/s</td><td align=center>2.27 Melems/s</td><td align=center><strong>31.9%</strong></td></tr><tr><td><span><b>Histogram Equalization</b></span></td><td align=center>67.3 Mpixels/s</td><td align=center>52.5 Mpixels/s</td><td align=center><strong>28.2%</strong></td></tr><tr><td><span><b>PDF Rendering</b></span></td><td align=center>66.4 Mpixels/s</td><td align=center>48.5 Mpixels/s</td><td align=center><strong>37.0%</strong></td></tr><tr><td><span><b>LLVM</b></span></td><td align=center>321.2 functions/s</td><td align=center>257.3 functions/s</td><td align=center><strong>24.8%</strong></td></tr><tr><td><span><b>Camera</b></span></td><td align=center>7.96 images/s</td><td align=center>5.64 images/s</td><td align=center><strong>40.9%</strong></td></tr></tbody></table><p>For the integer workload results we see a healthy performance across the various tests. Qualcomm’s 25-30% increase here seems to be justified as this is the most common increase in most tests. Workloads such as LZMA, HTML5 parsing, PDF rendering and the Camera substests see larger increases into the 40% range. The overall improvement in absolute performance for the integer tests is 31%.</p><p align=center><img alt="Geekbench 4 (Single Threaded) Integer Score/MHz" src=https://cdn.statically.io/img/images.anandtech.com/graphs/graph12420/95155.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></p><p>If we revisit performance per clock across recent microarchitectures we see the Snapdragon’s A75 based cores increase by only a meagre 15% which is below our expectations. We move on to the floating point benchmarks to see if we see a similar story.</p><table align=center border=0 cellpadding=0 cellspacing=1 width=650><tbody readability=1><tr class=tgrey readability=2><td align=center colspan=4>Geekbench 4 - Floating Point Performance<br>Single Threaded</td></tr><tr class=tlblue><td width=19%>&nbsp;</td><td align=center valign=middle width=27%>Snapdragon 845</td><td align=center valign=middle width=27%>Snapdragon 835</td><td align=center valign=middle width=27%><span>% Increase</span></td></tr><tr><td><span><b>SGEMM</b></span></td><td align=center>16.6 GFLOPS</td><td align=center>11.4 GFLOPS</td><td align=center><strong>45.1%</strong></td></tr><tr><td><span><b>SFFT</b></span></td><td align=center>4.23 GFLOPS</td><td align=center>2.86 GFLOPS</td><td align=center><strong>47.9%</strong></td></tr><tr><td><span><b>N-Body Physics</b></span></td><td align=center>1400 Kpairs/s</td><td align=center>872.2 Kpairs/s</td><td align=center><strong>60.5%</strong></td></tr><tr><td><span><b>Rigid Body Physics</b></span></td><td align=center>8524.2 FPS</td><td align=center>6130.5 FPS</td><td align=center><strong>39.0%</strong></td></tr><tr><td><span><b>Ray Tracing</b></span></td><td align=center>354.0 Kpixels/s</td><td align=center>232.7 Kpixels/s</td><td align=center><strong>52.1%</strong></td></tr><tr><td><span><b>HDR</b></span></td><td align=center>11.9 Mpixels/s</td><td align=center>8.31 Mpixels/s</td><td align=center><strong>43.2%</strong></td></tr><tr><td><span><b>Gaussian Blur</b></span></td><td align=center>34.5 Mpixels/s</td><td align=center>23.9 Mpixels/s</td><td align=center><strong>44.3%</strong></td></tr><tr><td><span><b>Speech Recognition</b></span></td><td align=center>17.9 Words/s</td><td align=center>13.6 Words/s</td><td align=center><strong>31.6%</strong></td></tr><tr><td><span><b>Face Detection</b></span></td><td align=center>752.4 Ksubs/s</td><td align=center>532.8 Ksubs/s</td><td align=center><strong>41.2%</strong></td></tr></tbody></table><p>The FP subtests of GB4 show a noticeably larger increase than the integer tests. Besides the switch from a 2-wide decode front-end to a 3-wide one, the largest changes of the A75 microarchitecture was found in the floating point execution pipelines and is likely the cause for the larger FP performance improvement. The boost here comes at an overall 45% in GB4.</p><p><img alt="Geekbench 4 (Single Threaded) Floating Point Score/MHz" src=https://cdn.statically.io/img/images.anandtech.com/graphs/graph12420/95156.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></p><p>In terms of performance per clock, the 45% overall boost translates into a much larger 26% increase in IPC which is nearer to what we had expected.</p><p><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/12420/arm-a75_a55-a75_perf_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>Revisiting the performance claims from ARM’s TechDay release of the A75 we notice that we had been promised larger improvements such as up to a 34% increase in GB4 performance per clock, which I interpreted with the frequency increase of the Snapdragon 845 to result in a 52% overall increase, which did not materialise. I reached out to ARM on the topic and got back several points of consideration: The projections ARM published were made on a A75 simulation with 512KB L2 caches and 2MB L3. The L3 matches the configuration of the Snapdragon 845 however Qualcomm’s choice of going with smaller L2 caches will have a certain performance hit. ARM didn’t have a number at hand for GB4 but quotes a 2% performance degradation for SPEC2000, and claims for GB4 it should be lower. Another consideration point is the memory subsystem of the SoC which ARM can’t control but heavily impacts the performance of the CPU, so let’s have a look at that.</p><p align=center><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/12420/845lat_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>Running our internal memory benchmark on the QRD we see several expected characteristics of the Snapdragon 845: Compared to the Snapdragon 835’s A73 based cores we see the shift from shared cluster L2’s to private ones as well as the integration of sort of an L3 and L4 cache. The new L2 caches are very visible in our benchmark as memory latency up to the 256KB barrier (or rather, the 320KB barrier as the L1D and L2 are exclusive) sees a vast reduction compared to the L2 region of the A73 cores. The A75 cores promise 8-cycle hits for the L2 versus 19 cycles on the A73. In our test the difference is far larger as see a reduction from ~30ns down to ~4.5ns (not forgetting a clock frequency increase of the new cache). After the 256/320KB test size boundary we enter the DSU’s L3 cache. ARM describes the L3 as pseudo-exclusive so the outer boundary should end around or shortly after the 2048KB mark, the transition here is much harder to make out in the limited data we had time to collect so hopefully we’ll get to revisit it on a commercial device.</p><p>On the Snapdragon 835 the transition between L2 cache and DRAM is very sharp and visible in the graph. On the Snapdragon 845 however we see a far more gradient latency transition stretching out to up to the 5MB test depth. This is confirmation that Qualcomm’s system cache is indeed applied to the CPU subsystem and acts as an exclusive L4 cache to the processors. I think this new system cache is a true SoC-wide cache lying high up at the interconnect or memory controller level.</p><p>One of the worries of such a configuration for the CPU subsystem was increased latency to DRAM and it seems my fears were realised as the Snapdragon 845 shows a 30% increase in main memory latency from the CPU subsystem. Previously the Snapdragon 835 seemed to have by far one of the best memory controller implementations which directly resulted in higher performance of memory latency sensitive workloads. The latency increase in the 845 thus must be&nbsp;counteracting some of the microarchitectural improvements on part of the CPU cores. For GB4 in particular I made a remark that I didn’t notice any performance impact at all on the part of the Kirin 970’s memory latency, however we’re talking about different platforms and CPUs so I can’t be certain.</p><p>We reserve final conclusion on synthetic benchmarks until we get more time with a Snapdragon 845 device and able to investigate more and run SPEC. For now it looks like the Snapdragon 845 does not reach ARM’s projected performance levels, and falls well short of the claims. Among one of the other performance claims was Octane. We retired Octane some years ago and Google shortly followed up with official retirement, but as an added data-point the Snapdragon 845 reached a score of 15969 versus the Snapdragon 835’s 11879, also well short of a 20000 target that a projected 1.48x per clock performance increase would have resulted in.</p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7orrAp5utnZOde6S7zGiqoaenZH5zgJFpZqymkaWxs63GqKVmcGRqerGx0Z%2Bmq6WRo7Cmec%2BrnK%2Bhlax8cw%3D%3D</p></section></article></main></div><footer><div class=container><span class=copyright>&copy; 2024 WinkBlog - <a rel=license href=http://creativecommons.org/licenses/by/4.0/>CC BY 4.0</a></span></div></footer><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/banner.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>